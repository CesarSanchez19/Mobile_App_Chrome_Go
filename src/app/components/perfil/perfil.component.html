<ion-content class="ion-padding">
  <div class="profile-container">
    <!-- Ícono de usuario (adornos, sin edición) -->
    <div class="logo-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100">
        <path d="M50 5
               C77.614 5 100 27.386 100 55
               C100 82.614 77.614 105 50 105
               C22.386 105 0 82.614 0 55
               C0 27.386 22.386 5 50 5 Z"
          fill="none" stroke="black" stroke-width="10"/>
        <text x="50" y="65" text-anchor="middle" font-size="40" font-weight="bold">G</text>
      </svg>
    </div>

    <div class="profile-details">
      <!-- Username -->
      <h2 *ngIf="!editing.username; else editUsername" (dblclick)="editing.username = true">
        {{ userProfile.username || 'Sin usuario' }}
      </h2>
      <ng-template #editUsername>
        <input type="text" title="Nombre de usuario" placeholder="Nombre de usuario"
               [(ngModel)]="userProfile.username" (blur)="editing.username = false">
      </ng-template>

      <!-- Nombre Completo -->
      <h3 *ngIf="!editing.fullName; else editFullName" (dblclick)="editing.fullName = true">
        {{ userProfile.fullName || 'Sin nombre' }}
      </h3>
      <ng-template #editFullName>
        <input type="text" title="Nombre completo" placeholder="Nombre completo"
               [(ngModel)]="userProfile.fullName" (blur)="editing.fullName = false">
      </ng-template>

      <!-- Correo Electrónico -->
      <h1>Correo Electrónico</h1>
      <div class="input-wrapper">
        <div class="icon-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
            <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105z"/>
          </svg>
        </div>
        <input type="email" [(ngModel)]="userProfile.email" [readonly]="!editing.email"
               title="Correo Electrónico" aria-label="Correo Electrónico" (dblclick)="editing.email = true">
      </div>
      <div *ngIf="emailError" class="error-message">{{ emailError }}</div>

      <!-- Número Telefónico -->
      <h1>Número Telefónico</h1>
      <div class="input-wrapper">
        <div class="icon-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone" viewBox="0 0 16 16">
            <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-4.17-3.505a.678.678 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58z"/>
          </svg>
        </div>
        <input type="tel" [(ngModel)]="userProfile.phone" [readonly]="!editing.phone"
               title="Número Telefónico" aria-label="Número Telefónico" (dblclick)="editing.phone = true">
      </div>
      <div *ngIf="phoneError" class="error-message">{{ phoneError }}</div>

      <!-- Fecha de Nacimiento -->
      <h1>Fecha de Nacimiento</h1>
      <div class="input-wrapper">
        <div class="icon-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16">
            <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
          </svg>
        </div>
        <input type="text" placeholder="2005-08-19" [readonly]="!editing.birthday"
               title="Fecha de Nacimiento" aria-label="Fecha de Nacimiento" (dblclick)="editing.birthday = true">
      </div>
      <div *ngIf="birthdayError" class="error-message">{{ birthdayError }}</div>

      <!-- Botón para guardar cambios -->
      <button (click)="saveChanges()" class="save-button">Guardar Cambios</button>
      <!-- Botón para cerrar sesión -->
      <button (click)="logout()" class="logout-button">Cerrar Sesión</button>
    </div>
  </div>
</ion-content>
